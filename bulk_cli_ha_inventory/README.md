# Create an inventory of Standby devices

Problem: CDO onboards an HA pair as a single device. Metadata shown (serial number, versions, etc.) is for the primary device. I wish to create an inventory of these "hidden" standby ASAs out there.

Solution: run a bulk CLI "failover exec standby show ***" on all HA devices

In this directory I have everything I need to succeed in this, hopefully in separate, reusable scripts:
1. `./fetch_ha_devices.sh > devices` -- will fetch all HA ASAs and will put them in a CSV file `devices`, containing `uid,name`
2. `./run_bulk_cli.sh devices results` -- will create a job across all devices in the `devices` input file and create a `results`, json that looks like:
```
[
  {
    "deviceUid": "e80c7d60-a52d-4c52-b5d0-ea845ce7fd5f",
    "deviceName": "Boston",
    "executionState": "ERROR",
    "errorMsg": "CONTAINS_NON_WHITELIST_COMMANDS",
    "response": null
  },
  {
    "deviceUid": "9be1139a-34da-41fa-a480-9188cf4d0ac6",
    "deviceName": "HA READ only",
    "executionState": "DONE",
    "errorMsg": null,
    "response": "Cisco Adaptive Security Appliance Software Version 9.8(2) \nFirepower Extensible Operating System Version 2.2(2.52)\nDevice Manager Version 7.8(2)\nREST API Agent Version 1.3.2.325\n\nCompiled on Sun 27-Aug-17 13:13 PDT by builders\nSystem image file is \"disk0:/asa982-smp-k8.bin\"\nConfig file at boot was \"startup-config\"\n\nasa-1504-1102-primary up 11 mins 31 secs\nfailover cluster up 342 days 17 hours\n\nHardware:   ASAv, 1024 MB RAM, CPU Xeon E5 series 2094 MHz,\nModel Id:   ASAv5\nInternal ATA Compact Flash, 1024MB\nSlot 1: ATA Compact Flash, 8192MB\nBIOS Flash Firmware Hub @ 0x0, 0KB\n\n\n 0: Ext: Management0/0       : address is 0050.5683.2056, irq 10\n 1: Ext: GigabitEthernet0/0  : address is 0050.5683.6815, irq 5\n 2: Ext: GigabitEthernet0/1  : address is 0050.5683.6291, irq 9\n 3: Ext: GigabitEthernet0/2  : address is 0050.5683.ecaa, irq 11\n 4: Ext: GigabitEthernet0/3  : address is 0050.5683.6a00, irq 10\n 5: Ext: GigabitEthernet0/4  : address is 0050.5683.1901, irq 5\n 6: Ext: GigabitEthernet0/5  : address is 0050.5683.b140, irq 9\n 7: Ext: GigabitEthernet0/6  : address is 0050.5683.252a, irq 11\n 8: Ext: GigabitEthernet0/7  : address is 0050.5683.453d, irq 10\n 9: Ext: GigabitEthernet0/8  : address is 0050.5683.6f03, irq 5\n\nLicense mode: Smart Licensing\nASAv Platform License State: Unlicensed\nActive entitlement: ASAv-STD-100M, enforce mode: Eval-expired\n*Memory resource allocation is more than the permitted limit.\n\nLicensed features for this platform:\nMaximum VLANs                     : 25             \nInside Hosts                      : Unlimited      \nFailover                          : Active/Standby \nEncryption-DES                    : Enabled        \nEncryption-3DES-AES               : Enabled        \nSecurity Contexts                 : 0              \nCarrier                           : Disabled       \nAnyConnect Premium Peers          : 2              \nAnyConnect Essentials             : Disabled       \nOther VPN Peers                   : 50             \nTotal VPN Peers                   : 50             \nAnyConnect for Mobile             : Disabled       \nAnyConnect for Cisco VPN Phone    : Disabled       \nAdvanced Endpoint Assessment      : Disabled       \nShared License                    : Disabled       \nTotal TLS Proxy Sessions          : 2              \nBotnet Traffic Filter             : Enabled        \nCluster                           : Disabled       \n\nSerial Number: 9AW939JNS32\n\nImage type          : Release\nKey version         : A\n\nConfiguration last modified by enable_1 at 15:02:15.909 UTC Wed May 6 2020\n\nCisco Adaptive Security Appliance Software Version 9.8(2) \nFirepower Extensible Operating System Version 2.2(2.52)\nDevice Manager Version 7.8(2)\nREST API Agent Version 1.3.2.325\n\nCompiled on Sun 27-Aug-17 13:13 PDT by builders\nSystem image file is \"disk0:/asa982-smp-k8.bin\"\nConfig file at boot was \"startup-config\"\n\nasa-1504-1102-primary up 7 mins 43 secs\nfailover cluster up 342 days 17 hours\n\nHardware:   ASAv, 1024 MB RAM, CPU Xeon E5 series 2094 MHz,\nModel Id:   ASAv5\nInternal ATA Compact Flash, 1024MB\nSlot 1: ATA Compact Flash, 8192MB\nBIOS Flash Firmware Hub @ 0x0, 0KB\n\n\n 0: Ext: Management0/0       : address is 0050.5683.42c8, irq 10\n 1: Ext: GigabitEthernet0/0  : address is 0050.5683.75f3, irq 5\n 2: Ext: GigabitEthernet0/1  : address is 0050.5683.f302, irq 9\n 3: Ext: GigabitEthernet0/2  : address is 0050.5683.4569, irq 11\n 4: Ext: GigabitEthernet0/3  : address is 0050.5683.1a72, irq 10\n 5: Ext: GigabitEthernet0/4  : address is 0050.5683.01ff, irq 5\n 6: Ext: GigabitEthernet0/5  : address is 0050.5683.9429, irq 9\n 7: Ext: GigabitEthernet0/6  : address is 0050.5683.b655, irq 11\n 8: Ext: GigabitEthernet0/7  : address is 0050.5683.5540, irq 10\n 9: Ext: GigabitEthernet0/8  : address is 0050.5683.5697, irq 5\n\nLicense mode: Smart Licensing\nASAv Platform License State: Unlicensed\nActive entitlement: ASAv-STD-100M, enforce mode: Eval-expired\n*Memory resource allocation is more than the permitted limit.\n\nLicensed features for this platform:\nMaximum VLANs                     : 25             \nInside Hosts                      : Unlimited      \nFailover                          : Active/Standby \nEncryption-DES                    : Enabled        \nEncryption-3DES-AES               : Enabled        \nSecurity Contexts                 : 0              \nCarrier                           : Disabled       \nAnyConnect Premium Peers          : 2              \nAnyConnect Essentials             : Disabled       \nOther VPN Peers                   : 50             \nTotal VPN Peers                   : 50             \nAnyConnect for Mobile             : Disabled       \nAnyConnect for Cisco VPN Phone    : Disabled       \nAdvanced Endpoint Assessment      : Disabled       \nShared License                    : Disabled       \nTotal TLS Proxy Sessions          : 2              \nBotnet Traffic Filter             : Enabled        \nCluster                           : Disabled       \n\nSerial Number: 9AHUPHC8A0P\n\nImage type          : Release\nKey version         : A\n\nConfiguration last modified by enable_1 at 15:06:03.329 UTC Wed May 6 2020"
  }
]
```

Now, you have a nice json with all the data. View it with your own eyes or parse it with your favorite tool. Enjoy.
